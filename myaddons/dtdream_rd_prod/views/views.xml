<openerp>
  <data>
<!--会计项目-->
    <record id="act_dtdream_rd_prod" model="ir.actions.act_window">
        <field name="name">会计项目</field>
        <field name="res_model">dtdream_rd_prod.dtdream_rd_prod</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="view_dtdream_rd_prod_tree" model="ir.ui.view">
        <field name="name">view.dtdream.rd.prod.tree</field>
        <field name="model">dtdream_rd_prod.dtdream_rd_prod</field>
        <field name="arch" type="xml">
            <tree>
                <field name="code"/>
                <field name="name"/>
            </tree>
        </field>
    </record>

    <record id="view_dtdream_rd_prod_form" model="ir.ui.view">
        <field name="name">view.dtdream.rd.prod.form</field>
        <field name="model">dtdream_rd_prod.dtdream_rd_prod</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="name" />
                            <!--<field name="department" domain="[('parent_id.parent_id','=',False),('child_ids','!=',False)]"/>-->
                        </group>
                        <group>
                            <field name="code" />
                            <!--<field name="department_2" domain="[('parent_id.parent_id.parent_id','=',False)]"/>-->
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>


<!--研发产品-->
      <record id="act_dtdream_prod_appr" model="ir.actions.act_window">
            <field name="name">研发产品</field>
            <field name="res_model">dtdream_rd_prod.dtdream_prod_appr</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
      </record>


     <!-- <record model="ir.ui.view" id="view_dtdream_prod_appr_kanban">
            <field name="name">view.dtdream.prod.appr.kanban</field>
            <field name="model">dtdream_rd_prod.dtdream_prod_appr</field>
            <field name="arch" type="xml">
                <kanban default_group_by="state_id">
                    <field name="state_id"/>
                    <field name="color"/>
                    <field name="active"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="#{kanban_color(record.color.raw_value)} oe_kanban_global_click">
                                <div class="o_dropdown_kanban dropdown">

                                    <a class="dropdown-toggle btn" data-toggle="dropdown" href="#" >
                                        <span class="fa fa-bars fa-lg"/>
                                    </a>
                                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                        <t t-if="widget.editable"><li><a type="edit">编辑</a></li></t>
                                        <t t-if="widget.deletable"><li><a type="delete">删除</a></li></t>
&lt;!&ndash;                                        <li t-if="! record.active.value"><a name="action_set_active" type="object">取消归档</a></li>
                                        <li t-if="record.active.value"><a name="action_set_unactive" type="object">归档</a></li>&ndash;&gt;
                                        <li><ul class="oe_kanban_colorpicker" data-field="color"/></li>
                                    </ul>
                                </div>
                                <div class="oe_kanban_content">
                                    <div>
                                        <strong><field name="name"/></strong>
                                    </div>
                                </div>
                                <div class="oe_clear"></div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
      </record>-->




      <record id="view_dtdream_prod_appr_tree" model="ir.ui.view">
        <field name="name">view.dtdream.prod.appr.tree</field>
        <field name="model">dtdream_rd_prod.dtdream_prod_appr</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="state" />
                <field name="department"/>
            </tree>
        </field>
    </record>

      <record id="view_dtdream_prod_appr_form" model="ir.ui.view">
          <field name="name">view.dtdream.prod.appr.form</field>
            <field name="model">dtdream_rd_prod.dtdream_prod_appr</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                         <!--<button name="btn_submit" string="提交"  type="object" states="state_00"/>
                        <button name="btn_next" string="下一步"  type="object" states="state_01,state_02,state_03"/>
                         <button name="btn_end" string="结束"  type="object" states="state_04"/>-->
                        <button name="%(dtdream_rd_prod.act_lixiang_wizard)d" string="提交" type="action" states="state_00"/>
                        <button name="%(dtdream_rd_prod.act_lixiang_wizard)d"  string="下一步"  type="action" states="state_01,state_02,state_03"/>
                        <button name="%(dtdream_rd_prod.act_lixiang_wizard)d"  string="结束"  type="action" states="state_04"/>
                        <field name="state" widget="statusbar" statusbar_visible="state_00,state_01,state_02,state_03,state_04,state_05" />
                    </header>
                    <sheet>
                        <group>
                            <field name="name" />
                        </group>
                        <notebook>
                            <page name="public" string="基本信息">
                                <group>
                                    <group>
                                        <field name="department" domain="[('parent_id','=',False),('child_ids','!=',False)]"/>
                                         <!--<field name="state" />-->
                                    </group>
                                    <group>
                                        <field name="department_2" domain="[('parent_id.parent_id','=',False)]"/>
                                    </group>
                                </group>
                            </page>
                            <page name="detail" string="详细信息">
                                <field name="role_ids" string="角色"/>
                            </page>
                            <page name="version" string="进度与计划">
                                <group>
                                    <field name="pro_time"/>
                                </group>
                                <group>
                                    <group>
                                        <field name="overall_plan_time"/>
                                    </group>
                                    <group>
                                        <field name="overall_actual_time" attrs="{'readonly':[('state','not in',('state_02'))]}"/>
                                    </group>
                                </group>
                                 <field name="version_ids" context="{'default_proName':id}">   <!--context="{'default_proName':id}"-->
                                <tree>
                                    <field name="proName"/>
                                    <field name="version_numb"/>
                                    <field name="pro_flag"/>
                                    <field name="version_state"/>
                                    <field name="plan_dev_time"/>
                                    <field name="plan_pub_time"/>
                                    <field name="actual_dev_time"/>
                                    <field name="actual_check_pub_time"/>
                                </tree>
                            </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
          </field>
    </record>


<!--版本-->
      <record id="act_dtdream_rd_version" model="ir.actions.act_window">
          <field name="name">版本</field>
          <field name="res_model">dtdream_rd_prod.dtdream_rd_version</field>
          <field name="type">ir.actions.act_window</field>
          <field name="view_type">form</field>
          <field name="view_mode">tree,form</field>
      </record>

      <record id="view_dtdream_rd_version_tree" model="ir.ui.view">
            <field name="name">view.dtdream.rd.version.tree</field>
            <field name="model">dtdream_rd_prod.dtdream_rd_version</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="proName"/>
                    <field name="pro_flag" />
                    <field name="version_numb"/>
                    <field name="version_state" />
                </tree>
            </field>
      </record>

      <record id="view_dtdream_rd_version_form" model="ir.ui.view">
        <field name="name">view.dtdream.rd.version.form</field>
        <field name="model">dtdream_rd_prod.dtdream_rd_version</field>
        <field name="arch" type="xml">
            <form>
                <header>
                     <button name="%(dtdream_rd_prod.act_version_wizard)d" string="下一步"  type="action" version_states="initialization,Development,pending"/>
                     <field name="version_state" widget="statusbar" statusbar_visible="initialization,Development,pending,released" />
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="name" invisible="1"/>
                            <!--<field name="proState" invisible="1"/>-->
                            <field name="proName" />
                            <field name="pro_flag" />
                        </group>
                        <group>
                            <field name="version_numb" />
                             <!--<field name="version_state" />-->
                        </group>
                    </group>
                    <notebook>
                        <page  string="版本计划">
                            <group>
                                <field name="plan_dev_time" attrs="{'readonly':[('version_state','not in',('initialization'))]}" />
                                <field name="plan_check_pub_time" attrs="{'readonly':[('version_state','not in',('initialization'))]}" />
                                <field name="plan_pub_time" attrs="{'readonly':[('version_state','not in',('initialization'))]}" />
                                <field name="plan_mater" attrs="{'readonly':[('version_state','not in',('initialization'))]}" />
                            </group>
                        </page>
                        <page string="版本开发" attrs="{'invisible':[('version_state','in',('initialization'))]}">
                            <group>
                                <field name="actual_dev_time" attrs="{'readonly':[('version_state','not in',('Development'))]}"/>
                                <field name="dev_mater" attrs="{'readonly':[('version_state','not in',('Development'))]}"/>
                            </group>
                        </page>
                        <page string="版本发布" attrs="{'invisible':[('version_state','in',('Development','initialization'))]}">
                            <group>
                                <group>
                                    <group>
                                        <field name="actual_check_pub_time" attrs="{'readonly':[('version_state','not in',('pending'))]}"/>
                                    </group>
                                    <group>
                                        <field name="actual_pub_time" attrs="{'readonly':[('version_state','not in',('pending'))]}"/>
                                    </group>
                                </group>
                            </group>
                             <group>
                                    <field name="place" attrs="{'readonly':[('version_state','not in',('pending'))]}"/>
                                    <field name="Material" attrs="{'readonly':[('version_state','not in',('pending'))]}"/>
                                </group>
                        </page>
                     </notebook>
                </sheet>
            </form>
        </field>
    </record>
<!--角色配置-->
      <record id="act_dtdream_rd_Rconfig" model="ir.actions.act_window">
          <field name="name">角色配置</field>
          <field name="res_model">dtdream_rd_prod.dtdream_rd_config</field>
          <field name="type">ir.actions.act_window</field>
          <field name="view_type">form</field>
          <field name="view_mode">tree</field>
      </record>

      <record id="view_dtdream_rd_config_from" model="ir.ui.view">
            <field name="name">view.dtdream.rd.config.from</field>
            <field name="model">dtdream_rd_prod.dtdream_rd_config</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name" />
                            </group>
                            <group>
                                <field name="person" />
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
      </record>

      <record id="view_dtdream_rd_config_tree" model="ir.ui.view">
            <field name="name">view.dtdream.rd.config.tree</field>
            <field name="model">dtdream_rd_prod.dtdream_rd_config</field>
            <field name="arch" type="xml">
                <tree editable="bottom">
                    <field name='name'/>
                    <field name="person"/>
                </tree>
            </field>
      </record>

<!--菜单-->
    <menuitem id="menu_finance_rd" name="研发" groups ="group_dtdream_rd_user"/>
    <!--<menuitem id="menu_finance_rd_prod" name="会计项目" parent="hr_expense.menu_hr_expense_root" sequence="500"  action="act_dtdream_rd_prod" groups="group_dtdream_rd_user"/>-->
    <menuitem id="menu_finance_prod_appr" name="研发产品" parent="menu_finance_rd" sequence="100"  action="act_dtdream_prod_appr"/>
    <menuitem id="menu_finance_rd_version" name="版本" parent="menu_finance_rd" sequence="200" action="act_dtdream_rd_version"/>
    <menuitem id="menu_finance_rd_config" name="配置" parent="menu_finance_rd" sequence="300"/>
    <menuitem id="menu_finance_rd_Rconfig" name="角色配置" parent="menu_finance_rd_config" sequence="500"  action="act_dtdream_rd_Rconfig"/>
  </data>
</openerp>