<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data noupdate="0">

        <!--主管周报权限-->
        <record id="dtdream_manager_report_see_own" model="ir.rule">
            <field name="name">管理自己的主管周报</field>
            <field ref="model_dtdream_sale_manager_report" name="model_id"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">[("create_uid",'=',user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <record id="dtdream_manager_report_see_own_delete" model="ir.rule">
            <field name="name">删除自己的主管周报</field>
            <field ref="model_dtdream_sale_manager_report" name="model_id"/>
            <field name="perm_read" eval="0"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="1"/>
            <field name="domain_force">[("create_uid",'=',user.id),('status','=','0')]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <record id="dtdream_management_manager" model="ir.rule">
            <field name="name">区域管理部部长按部门查看主管周报</field>
            <field ref="model_dtdream_sale_manager_report" name="model_id"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">[("department",'in',[x.name for x in user.user_access_department]),('status','=','1')]</field>
            <field name="groups" eval="[(4, ref('dtdream_sale.group_dtdream_management_manager'))]"/>
        </record>

        <record id="dtdream_management_vice_manager" model="ir.rule">
            <field name="name">区域管理部副部长按部门查看主管周报</field>
            <field ref="model_dtdream_sale_manager_report" name="model_id"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">[("department",'in',[x.name for x in user.user_access_department]),('status','=','1')]</field>
            <field name="groups" eval="[(4, ref('dtdream_sale.group_dtdream_management_vice_manager'))]"/>
        </record>

        <record id="dtdream_marketing_department_project_interface_person" model="ir.rule">
            <field name="name">营销管理部项目接口人按部门查看主管周报</field>
            <field ref="model_dtdream_sale_manager_report" name="model_id"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">[("department",'in',[x.name for x in user.user_access_department]),('status','=','1')]</field>
            <field name="groups" eval="[(4, ref('dtdream_sale.group_dtdream_marketing_department_project_interface_person'))]"/>
        </record>

        <record id="dtdream_manager_sale_high_manager" model="ir.rule">
            <field name="name">营销管理组可查看所有主管周报</field>
            <field ref="model_dtdream_sale_manager_report" name="model_id"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">[('status','=','1')]</field>
            <field name="groups" eval="[(4, ref('dtdream_sale.group_dtdream_sale_high_manager'))]"/>
        </record>

        <record id="group_dtdream_company_manager" model="ir.rule">
            <field name="name">公司总裁可查看所有主管周报</field>
            <field ref="model_dtdream_sale_manager_report" name="model_id"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">[('status','=','1')]</field>
            <field name="groups" eval="[(4, ref('dtdream_sale.group_dtdream_company_manager'))]"/>
        </record>

        <record id="group_dtdream_market_manager" model="ir.rule">
            <field name="name">市场部部长可查看所有主管周报</field>
            <field ref="model_dtdream_sale_manager_report" name="model_id"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">[('status','=','1')]</field>
            <field name="groups" eval="[(4, ref('dtdream_sale.group_dtdream_market_manager'))]"/>
        </record>

        <record id="dtdream_weekly_report_manager_manage" model="ir.rule">
            <field name="name">周报管理员可管理所有主管周报</field>
            <field ref="model_dtdream_sale_manager_report" name="model_id"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_unlink" eval="1"/>
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(4, ref('dtdream_sale.group_dtdream_weekly_report_manager'))]"/>
        </record>
    </data>
</openerp>
