<openerp>
  <data>

    <record id="view_dtdream_customer_reception_form" model="ir.ui.view">
        <field name="name">view.dtdream.customer.reception.form</field>
        <field name="model">dtdream.customer.reception</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="btn_submit" string="提交" type="workflow" class="oe_highlight"
                            attrs="{'invisible':[('state','not in',('0', '3', '4'))]}"/>
                    <button name="btn_back" string="撤回" type="workflow" class="oe_highlight"
                            attrs="{'invisible':[('state','not in',('1', '2', '3'))]}"/>
                    <button name="btn_agree" string="同意" type="workflow" class="oe_highlight"
                            attrs="{'invisible':[('state','not in',('1', '2'))]}"/>
                    <button name="btn_reject" string="驳回" type="workflow" class="oe_highlight"
                            attrs="{'invisible':[('state','not in',('1', '2'))]}"/>
                    <field name="state"  widget="statusbar"
                           statusbar_visible="0,1,2,3,4,99"/>
               </header>
              <sheet>
                  <group string="基本信息">
                      <group>
                          <field name="bill_num" readonly="True" attrs="{'invisible':[('bill_num','=',False)]}"/>
                          <field name="write_time" readonly="True"/>
                      </group>
                      <group>
                          <field name="duty_tel"/>
                      </group>
                  </group>

                  <group string="员工信息">
                      <group>
                          <field name="name" required="True"/>
                          <field name="post"/>
                          <field name="department"/>
                          <field name="home"/>
                      </group>
                      <group>
                          <field name="workid"/>
                          <field name="iphone"/>
                          <field name="code"/>
                      </group>
                  </group>

                  <group string="客户信息">
                      <group>
                          <field name="customer" required="True" domain="[('customer', '=', True)]"/>
                          <field name="customer_level"/>
                          <field name="customer_source"/>
                          <field name="customer_v" widget="radio" options="{'horizontal': true}"/>
                          <field name="background"/>
                      </group>
                      <group>
                          <field name="visit_count" required="True"/>
                          <field name="project" options="{'no_open': True,'no_create': True}"/>
                          <field name="inter_tel"/>
                          <field name="visit_date" required="True"/>
                          <field name="purpose" required="True" options="{'no_open': True,'no_create': True}"/>
                      </group>
                  </group>
                  <group string="主宾信息">
                      <notebook>
                        <page>
                            <field name="guest">
                                <tree editable="bottom">
                                    <field name="name_guest" required="True"/>
                                    <field name="post_guest"/>
                                </tree>
                            </field>
                        </page>
                      </notebook>
                  </group>
                  <group string="客户接待执行人" attrs="{'invisible':[('state','in',('0','1'))]}">
                      <group>
                          <field name="receptionist" attrs="{'required':[('state','not in',('0','1'))]}"/>
                      </group>
                  </group>

                  <group string="接待资源需求">
                      <group>
                          <field name="accompany_leads" widget="many2many_tags" required="True"/>
                          <field name="participants" widget="many2many_tags" required="True"/>
                      </group>
                      <group>
                          <field name="interpreter" widget="many2many_tags" required="True"/>
                      </group>
                  </group>

                  <group string="会议室资源需求">
                      <group>
                          <field name="meeting" options="{'no_open': True,'no_create': True}"/>
                          <field name="room_capacity"/>
                      </group>
                      <group>
                          <field name="reserve_time"/>
                          <field name="busy_time_room"/>
                      </group>
                      <group style="margin-top: -10px;" colspan="12">
                          <label string="会议室准备" colspan="4" style="font-weigh:bold"/>
                          <div class="o_row dtdream_customer_checkbox">
                              <field name="ppt"/>
                              <span style="margin-right:30px">PPT</span>
                              <field name="camera"/>
                              <span style="margin-right:30px">摄影</span>
                              <field name="water"/>
                              <span style="margin-right:30px">瓶装水</span>
                              <field name="tea"/>
                              <span style="margin-right:30px">茶水</span>
                              <field name="meeting_document"/>
                              <span style="margin-right:30px">公司资料</span>
                              <field name="seat_board"/>
                              <span style="margin-right:30px">席位牌</span>
                              <field name="banner"/>
                              <span style="margin-right:30px">横幅</span>
                              <field name="other_more"/>
                              <span>其它</span>
                          </div>
                          <group>
                              <field name="other_more_text" attrs="{'invisible':[('other_more','=',False)]}"/>
                          </group>
                      </group>
                  </group>

                  <group string="接送安排">
                      <group>
                          <div class="o_row dtdream_customer_input dtdream_customer_checkbox">
                              <field name="car"/>
                              <span>小车</span>
                              <field name="car_num"/>
                              <span>部</span>
                          </div>
                          <div class="o_row dtdream_customer_input dtdream_customer_checkbox">
                              <field name="commercial_vehicle"/>
                              <span>商务车</span>
                              <field name="commercial_vehicle_num"/>
                              <span>部</span>
                          </div>
                      </group>
                      <group>
                          <div class="dtdream_customer_input dtdream_customer_checkbox">
                              <field name="bicycle"/>
                              <span>自行乘车</span>
                          </div>
                      </group>
                  </group>

                  <group string="行程路线">
                      <notebook>
                        <page>
                            <field name="path">
                                <tree editable="bottom">
                                    <field name="start_time"/>
                                    <field name="starting"/>
                                    <field name="end_time"/>
                                    <field name="destination"/>
                                </tree>
                            </field>
                        </page>
                      </notebook>
                  </group>

                  <group string="接送要求">
                      <group>
                          <div class="o_row dtdream_customer_checkbox">
                              <field name="driver" border="yellow 2px solid;"/>
                              <span>司机</span>
                          </div>
                          <div class="dtdream_customer_checkbox">
                               <field name="card"/>
                               <span>接机牌</span>
                          </div>
                      </group>
                      <group>
                          <div class="o_row dtdream_customer_checkbox">
                              <field name="assistance"/>
                              <span>接机/接站人员</span>
                          </div>
                          <div class="dtdream_customer_checkbox">
                              <field name="flower"/>
                              <span>鲜花</span>
                          </div>
                      </group>
                  </group>

                  <group string="接待标准">
                      <group>
                          <label for="single_room" string="酒店住宿"/>
                          <div class="o_row dtdream_customer_checkbox" style="margin: -5px 0 5px -50px;">
                              <field name="single_room" attrs="{'invisible':[('room_self','=',True)]}"/>
                              <span attrs="{'invisible':[('room_self','=',True)]}">标准单人房</span>
                              <field name="single_room_num" attrs="{'invisible':[('room_self','=',True)]}"/>
                              <span style="margin-right:20px" attrs="{'invisible':[('room_self','=',True)]}">间</span>
                              <field name="double_room" attrs="{'invisible':[('room_self','=',True)]}"/>
                              <span attrs="{'invisible':[('room_self','=',True)]}">标准双人房</span>
                              <field name="double_room_num" attrs="{'invisible':[('room_self','=',True)]}"/>
                              <span style="margin-right:20px" attrs="{'invisible':[('room_self','=',True)]}">间</span>
                              <field name="room_self" attrs="{'invisible':['|',('double_room','=',True),('single_room','=',True)]}"/>
                              <span attrs="{'invisible':['|',('double_room','=',True),('single_room','=',True)]}">自理安排酒店</span>
                          </div>
                          <label for="hotel"/>
                          <div class="o_row" style="margin: -2px 0 5px -50px;">
                              <field name="hotel" widget="radio" options="{'horizontal': true}"/>
                          </div>
                          <label for="dinner"/>
                          <div class="o_row" style="margin: -2px 0 5px -50px;">
                              <field name="dinner" widget="radio" options="{'horizontal': true}"/>
                          </div>
                          <label for="memories"/>
                          <div class="o_row" style="margin: -2px 0 5px -50px;">
                              <field name="memories" options="{'no_open': True,'no_create': True}"/>
                              <span style="margin-left: 30px;">数量</span>
                              <field name="memories_num"/>
                          </div>
                          <label for="remark"/>
                          <div class="o_row" style="margin: -2px 0 5px -50px;">
                              <field name="remark"/>
                          </div>
                      </group>
                      <group>
                          <field name="hotel_position" widget="radio" options="{'horizontal': true}"/>
                          <field name="payment_hotel" widget="radio" options="{'horizontal': true}"/>
                          <field name="dinner_position" widget="radio" options="{'horizontal': true}"/>
                          <field name="payment_dinner" widget="radio" options="{'horizontal': true}"/>
                      </group>
                  </group>

                  <group string="费用预算">
                      <group>
                          <field name="hotel_fee" required="True"/>
                          <field name="car_fee" required="True"/>
                          <field name="other_fee" required="True"/>
                      </group>
                      <group>
                          <field name="dinner_fee" required="True"/>
                          <field name="advertise_fee" required="True"/>
                          <field name="total_fee"/>
                      </group>
                  </group>

                  <group string="接待小结" attrs="{'invisible':[('state','in',('0','1', '2'))]}">
                      <group>
                          <field name="summary"/>
                      </group>
                  </group>
                  <group string="评价" attrs="{'invisible':[('state','not in',('4','99'))]}">
                      <group>
                          <label for="score" string="请对本次的客户接待安排进行评价(1分最差，10分最好):" colspan="2"/>
                          <div class="o_row">
                              <field name="score"/>
                          </div>
                      </group>
                  </group>

              </sheet>

              <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="message_ids" widget="mail_thread"/>
              </div>

            </form>
        </field>
    </record>

    <record id="view_dtdream_customer_reception_tree" model="ir.ui.view">
        <field name="name">view.dtdream.customer.reception.tree</field>
        <field name="model">dtdream.customer.reception</field>
        <field name="arch" type="xml">
            <tree>
              <field name="bill_num"/>
              <field name="name"/>
              <field name="workid"/>
              <field name="iphone"/>
              <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="view_marketing_activities_form" model="ir.ui.view">
        <field name="name">marketing.activities.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook/page[@name='sales_purchases']" position="after">
                <page string="营销活动" name="marketing_activities">
                   <field name="marketing_activities">
                       <tree editable="bottom" create="0">
                           <field name="activity"/>
                           <field name="activity_time"/>
                           <field name="activity_place"/>
                           <field name="customer" widget="many2many_tags"/>
                           <field name="company" widget="many2many_tags"/>
                           <field name="activity_content"/>
                           <field name="activity_result"/>
                       </tree>
                   </field>
                </page>
            </xpath>

            <button name="toggle_active" position="before">
               <button class="oe_stat_button" type="action" name="%(act_dtdream_customer_reception_mine)d"
                icon="fa-edit">
                    <field string="客户接待" name="customer_reception" widget="statinfo"/>
               </button>
            </button>
        </field>
    </record>

    <record id="view_dtdream_customer_reception_config_form" model="ir.ui.view">
        <field name="name">view.dtdream.customer.reception.config.form</field>
        <field name="model">dtdream.customer.reception.config</field>
        <field name="arch" type="xml">
            <form>
              <sheet>
                  <group>
                      <group>
                          <field name="duty_phone"/>
                          <field name="officer"/>
                      </group>
                      <group>
                          <field name="car"/>
                          <field name="inter"/>
                      </group>
                      <notebook colspan="12">
                          <page string="来访目的">
                              <field name="purpose">
                                  <tree editable="bottom">
                                      <field name="name"/>
                                  </tree>
                              </field>
                          </page>
                          <page string="会议室资源">
                              <field name="metting_room">
                                  <tree editable="bottom">
                                      <field name="name"/>
                                  </tree>
                              </field>
                          </page>
                          <page string="纪念品">
                              <field name="memory">
                                  <tree editable="bottom">
                                      <field name="name"/>
                                  </tree>
                              </field>
                          </page>
                      </notebook>
                  </group>
              </sheet>
            </form>
        </field>
     </record>

  </data>
</openerp>