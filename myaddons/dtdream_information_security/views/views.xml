<openerp>
    <data>
        <record id="act_dtdream_information_purview_wait" model="ir.actions.act_window">
            <field name="name">权限申请/待我审批</field>
            <field name="res_model">dtdream.information.purview</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[('current_approver_user','=',uid)]</field>
        </record>

        <record id="act_dtdream_information_purview_self" model="ir.actions.act_window">
            <field name="name">权限申请/我相关的</field>
            <field name="res_model">dtdream.information.purview</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">['|','|','|',('create_uid','=',uid),('current_approver_user','=',uid),('his_approver_user','=',uid),('Co_applicant_user','=',uid)]</field>
        </record>

         <record id="act_dtdream_information_purview_all" model="ir.actions.act_window">
            <field name="name">所有权限申请</field>
            <field name="res_model">dtdream.information.purview</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
        </record>


        <record id="dtdream_information_purview_tree" model="ir.ui.view">
            <field name="name">dtdream_information_purview_tree</field>
            <field name="model">dtdream.information.purview</field>
            <field name="arch" type="xml">
                <tree>
                    <!--<field name="name"/>-->
                    <field name="applicant"/>
                    <field name="style"/>
                    <field name="state"/>
                    <field name="current_approver"/>
                    <field name="shenqing_date"/>
                    <field name="dead_line"/>

                </tree>
            </field>
        </record>


        <record model="ir.ui.view" id="dtdream_information_purview_kanban_view">
            <field name="name">dtdream.information.purview.kanban</field>
            <field name="model">dtdream.information.purview</field>
            <field name="arch" type="xml">
                <kanban class="o_res_partner_kanban" >
                    <field name="name"/>
                    <field name="applicant"/>
                    <field name="state"/>
                    <field name="current_approver"/>
                    <templates>
                        <t t-name="kanban-box">
                        <div class="oe_kanban_global_click ">
                             <div class="o_kanban_image">
                                  <img t-att-src="kanban_image('product.template', 'image_small', record.id.value)"/>
                              </div>
                            <div class="oe_kanban_details">
                                <div name="tags"/>
                                    <ul>
                                        <li ><strong>摘要:</strong> <field name="name" /></li>
                                        <li ><strong>申请人:</strong> <field name="applicant" /></li>
                                        <li ><strong>状态:</strong> <field name="state" /></li>
                                    </ul>
                            <div name="tags"/>
                            </div>
                        </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>


        <record model="ir.ui.view" id="dtdream_information_purview_form">
            <field name="name">dtdream_information_purview_form</field>
            <field name="model">dtdream.information.purview</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <!--<button name="permission_settings" string="test" type="object" />-->
                        <button name="do_cgtj" string="提交" type="object" confirm="是否确认提交草稿？" class="oe_highlight" attrs="{'invisible':['|',('state','not in',('state_01')),('is_create','=',False)]}"/>
                        <button name="%(dtdream_information_security.act_agree)d"  type="action" class="oe_highlight" string="同意" attrs="{'invisible':[('is_shenpiren','=',False)]}"/>
                        <button name="%(dtdream_information_security.act_disagree)d" class="oe_highlight" string="不同意" type="action" attrs="{'invisible':[('is_shenpiren','=',False)]}"/>
                        <button name="%(dtdream_information_security.act_overrule)d"  type="action" class="oe_highlight" string="驳回" attrs="{'invisible':[('is_shenpiren','=',False)]}"/>
                        <button name="%(dtdream_information_security.act_shouquan)d"  class="oe_highlight" type="action" string="授权" attrs="{'invisible':['|',('state','not in',('state_03')),('is_shenpiren','=',False)]}"/>
                        <field name="state" widget="statusbar" statusbar_visible="state_01,state_02,state_03,state_04,state_05" />
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="applicant" />
                                <field name="department_01"/>
                                <field name="department_02"/>
                                <!--<field name="sq_department_code"/>-->
                                <field name="manager" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}" options="{'no_create':True}"/>

                                <field name="is_create" invisible="1"/>
                                <field name="is_shenpiren" invisible="1"/>
                            </group>
                            <group>
                                <field name="Co_applicant" widget="many2many_tags" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}" options="{'no_create':True}"/>
                                <field name="origin_department_01" domain="[('parent_id','=',False)]" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}" options="{'no_create':True}"/>
                                <!--<field name="origin_department_02" domain="[('parent_id.parent_id','=',False)]" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}"/>-->
                                <!--<field name="yuan_department_code"/>-->
                                <!--<field name="secret_level" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}"/>-->
                                <field name="style" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}"/>
                                <field name="dead_line" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}"/>
                                <field name="conf_flag" invisible="1"/>
                                <field name="git_flag" invisible="1"/>
                                <field name="other_flag" invisible="1"/>
                            </group>
                        </group>
                        <group >
                            <field name="reason" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}"/>
                        </group>
                        <notebook attrs="{'invisible':[('conf_flag','=',False)]}">
                            <page string="Confluence清单">
                                <field name="confluence_list" mode="tree,kanban" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}">
                                    <tree editable="bottom">
                                        <!--<field name="conf" options="{'no_create': True}"/>-->
                                        <field name="space" options="{'no_create': True}"/>
                                        <!--<field name="description"/>-->
                                        <field name="read_right"/>
                                        <field name="write_right"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="space"/>
                                            </group>
                                            <group>
                                                <field name="read_right"/>
                                                <field name="write_right"/>
                                            </group>
                                        </group>
                                    </form>
                                    <kanban class="o_res_partner_kanban" >
                                        <field name="conf" />
                                        <field name="space" />
                                        <field name="description"/>
                                        <field name="read_right"/>
                                        <field name="write_right"/>
                                        <templates>
                                            <t t-name="kanban-box">
                                            <div class="oe_kanban_global_click ">
                                                 <div class="o_kanban_image">
                                                      <img t-att-src="kanban_image('product.template', 'image_small', record.id.value)"/>
                                                  </div>
                                                <div class="oe_kanban_details">
                                                    <div name="tags"/>
                                                        <ul>
                                                            <!--<li ><strong>所属:</strong> <field name="conf" /></li>-->
                                                            <li > <strong>空间:</strong><field name="space" /></li>
                                                            <li ><strong>读权限:</strong> <field name="read_right" /></li>
                                                            <li > <strong>写权限:</strong><field name="write_right"/></li>
                                                        </ul>
                                                <div name="tags"/>
                                                </div>
                                            </div>
                                            </t>
                                        </templates>
                                    </kanban>


                                </field>
                            </page>
                        </notebook>
                        <notebook attrs="{'invisible':[('git_flag','=',False)]}">
                            <page string="Gitlab清单">
                                <field name="git_list" mode="tree,kanban" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}">
                                    <tree editable="bottom">
                                        <field name="git" options="{'no_create': True}"/>
                                        <field name="space" options="{'no_create': True}"/>
                                        <!--<field name="description"/>-->
                                        <field name="read_right"/>
                                        <field name="write_right"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="git"/>
                                                <field name="space"/>
                                            </group>
                                            <group>
                                                <field name="read_right"/>
                                                <field name="write_right"/>
                                            </group>
                                        </group>
                                    </form>

                                    <kanban class="o_res_partner_kanban" >
                                        <field name="git" />
                                        <field name="space" />
                                        <field name="description"/>
                                        <field name="read_right"/>
                                        <field name="write_right"/>
                                        <templates>
                                            <t t-name="kanban-box">
                                            <div class="oe_kanban_global_click ">
                                                 <div class="o_kanban_image">
                                                      <img t-att-src="kanban_image('product.template', 'image_small', record.id.value)"/>
                                                  </div>
                                                <div class="oe_kanban_details">
                                                    <div name="tags"/>
                                                        <ul>
                                                            <li ><strong>所属:</strong> <field name="git" /></li>
                                                            <li > <strong>空间:</strong><field name="space" /></li>
                                                            <li ><strong>读权限:</strong> <field name="read_right" /></li>
                                                            <li > <strong>写权限:</strong><field name="write_right"/></li>
                                                        </ul>
                                                <div name="tags"/>
                                                </div>
                                            </div>
                                            </t>
                                        </templates>
                                    </kanban>
                                </field>
                            </page>
                        </notebook>
                        <notebook>
                            <page string="其他清单" attrs="{'invisible':[('other_flag','=',False)]}">
                                <field name="other_list" mode="tree,kanban" attrs="{'readonly':['|',('is_create','=',False),('state','not in',('state_01'))]}">
                                    <tree editable="bottom">
                                        <field name="space"/>
                                        <!--<field name="description"/>-->
                                        <!--<field name="read_right"/>-->
                                        <!--<field name="write_right"/>-->
                                    </tree>
                                    <form>
                                        <group>
                                            <field name="space"/>
                                        </group>
                                    </form>

                                    <kanban class="o_res_partner_kanban" >
                                        <field name="space" />
                                        <field name="description"/>
                                        <templates>
                                            <t t-name="kanban-box">
                                            <div class="oe_kanban_global_click ">
                                                 <div class="o_kanban_image">
                                                      <img t-att-src="kanban_image('product.template', 'image_small', record.id.value)"/>
                                                  </div>
                                                <div class="oe_kanban_details">
                                                    <div name="tags"/>
                                                        <ul>
                                                            <li > <strong>内容:</strong><field name="space" /></li>
                                                            <li > <strong>描述:</strong><field name="description"/></li>
                                                        </ul>
                                                <div name="tags"/>
                                                </div>
                                            </div>
                                            </t>
                                        </templates>
                                    </kanban>



                                </field>
                            </page>
                        </notebook>
                      </sheet>
                      <div class="oe_chatter">
                          <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                          <field name="message_ids" widget="mail_thread"/>
                      </div>
                </form>
            </field>
        </record>

        <menuitem name="信息安全" id="dtdream_information_security_root" icon="fa-user" web_icon="dtdream_information_security,static/description/safe.png"/>

        <menuitem name="权限申请" sequence="100" id="dtdream_information_purview_menu" parent="dtdream_information_security_root"/>
        <menuitem name="我相关的" sequence="100" id="dtdream_information_purview_menu_self" parent="dtdream_information_purview_menu" action="act_dtdream_information_purview_self"/>
        <menuitem name="待我审批" sequence="200" id="dtdream_information_purview_menu_wait" parent="dtdream_information_purview_menu" action="act_dtdream_information_purview_wait"/>


        <menuitem name="所有" sequence="150" id="dtdream_informati_security_menu" parent="dtdream_information_security_root" groups="group_dtdream_information_manager"/>
        <menuitem name="所有权限申请" sequence="100" id="dtdream_information_purview_menu_all" parent="dtdream_informati_security_menu" action="act_dtdream_information_purview_all" groups="group_dtdream_information_manager"/>

        <menuitem name="配置" sequence="200" id="dtdream_information_config_menu" parent="dtdream_information_security_root" groups="group_dtdream_information_manager,base.group_system"/>
        <menuitem name="绝密权签人" sequence="100" id="dtdream_information_people_menu" parent="dtdream_information_config_menu" action="act_dtdream_informatio_people" groups="group_dtdream_information_manager"/>
        <menuitem name="部门信息安全员" sequence="200" id="dtdream_security_departmentconf_menu" parent="dtdream_information_config_menu" action="act_dtdream_security_right_peo" groups="group_dtdream_information_manager"/>
        <menuitem name="类型配置" sequence="300" id="dtdream_information_type_menu" parent="dtdream_information_config_menu" action="act_dtdream_information_type" groups="base.group_system"/>
    </data>
</openerp>