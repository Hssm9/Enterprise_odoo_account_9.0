<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>

    <record id="view_dtdream_hr_resume_form" model="ir.ui.view">
        <field name="name">view.dtdream.hr.resume.form</field>
        <field name="model">dtdream.hr.resume</field>
        <field name="arch" type="xml">
            <form>
               <header>
                    <button name="btn_submit" string="提交" type="workflow" class="oe_highlight"
                            attrs="{'invisible':[('state','!=','0')]}"/>
                    <button name="btn_approve" string="通过" type="workflow" class="oe_highlight"
                            attrs="{'invisible':[('state','!=','1')]}"/>
                    <button name="%(act_resume_wizard)d" string="驳回" type="action" class="oe_highlight"
                            attrs="{'invisible':[('state','!=','1')]}"/>
                    <button name="btn_restart" string="重启流程" type="workflow" class="oe_highlight"
                            attrs="{'invisible':[('state','!=','-1')]}"/>
                    <field name="state"  widget="statusbar"
                           statusbar_visible="0,1,99"/>
               </header>
              <sheet>
                <group string="基本信息">
                    <group>
                        <field name="name"/>
                        <field name="department"/>
                    </group>
                    <group>
                        <field name="workid"/>
                        <field name="has_title"/>
                        <field name="is_graduate" invisible="True"/>
                    </group>
                </group>
                <group string="工作经历" attrs="{'invisible':[('is_graduate','=',True)]}">
                    <div>
                         <p style="padding-left: 40px">入职前的合计工龄将影响年休假计算，请如实填写。在校阶段实习经历不纳入工作经历</p>
                        <notebook>
                            <page>
                              <field name="experince">
                                  <tree editable="bottom">
                                     <field name="start_time"/>
                                     <field name="end_time"/>
                                     <field name="age_work"/>
                                     <field name="company"/>
                                     <field name="post"/>
                                     <field name="remark"/>
                                  </tree>
                              </field>
                              <group style="margin-top:-5px" class="oe_subtotal_footer" name="age_work_total">
                                <field name="total_work"  class="oe_subtotal_footer_separator"/>
                              </group>
                            </page>
                        </notebook>
                    </div>
                </group>

                <group string="职称信息">
                    <div>
                        <p style="padding-left: 40px">所提交的职称信息，需提交相关证件至人力资源审核。如有信息无法确定，可先不填写。</p>
                        <notebook>
                            <page>
                                  <field name="title">
                                      <tree editable="bottom">
                                          <field name="name"/>
                                          <field name="depertment"/>
                                          <field name="date"/>
                                          <field name="remark"/>
                                      </tree>
                                  </field>
                            </page>
                        </notebook>
                    </div>
                </group>

                <group string="学历信息">
                    <notebook>
                        <page>
                            <field name="degree">
                              <tree editable="bottom">
                                 <field name="degree"/>
                                 <field name="has_degree"/>
                                 <field name="entry_time"/>
                                 <field name="leave_time"/>
                                 <field name="school"/>
                                 <field name="major"/>
                              </tree>
                          </field>
                        </page>
                    </notebook>
                </group>

                <group string="外语信息">
                    <notebook>
                        <page>
                            <field name="language">
                              <tree editable="bottom">
                                  <field name="langange"/>
                                  <field name="cerdit"/>
                                  <field name="result"/>
                                  <field name="remark"/>
                              </tree>
                          </field>
                        </page>
                    </notebook>
                </group>
                <p>*<b>填写说明</b>:以上信息修改后，需『提交』至人力资源部审核后才生效</p>
              </sheet>

              <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="message_ids" widget="mail_thread"/>
              </div>
            </form>
        </field>
    </record>

    <record id="view_hr_resume_approve_form" model="ir.ui.view">
        <field name="name">view.hr.resume.approve.form</field>
        <field name="model">hr.resume.approve</field>
        <field name="arch" type="xml">
            <form string="履历审批人">
                <sheet>
                    <group>
                        <group>
                            <field name="approve" widget="many2many_tags" options="{'no_create': True}"/>
                        </group>
                        <group>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_hr_resume_approve_tree" model="ir.ui.view">
        <field name="name">view.hr.resume.approve.tree</field>
        <field name="model">hr.resume.approve</field>
        <field name="arch" type="xml">
            <tree>
                <field name="approve"/>
            </tree>
        </field>
    </record>

    <record id="view_hr_remind_mobile_form" model="ir.ui.view">
        <field name="name">view.hr.remind.mobile.form</field>
        <field name="model">hr.remind.mobile</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="remind" widget="many2many_tags" options="{'no_create': True}"/>
                        </group>
                        <group>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_hr_remind_mobile_tree" model="ir.ui.view">
        <field name="name">view.hr.remind.mobile.tree</field>
        <field name="model">hr.remind.mobile</field>
        <field name="arch" type="xml">
            <tree>
                <field name="remind"/>
            </tree>
        </field>
    </record>

    <record id="view_dtdream_hr_resume_tree" model="ir.ui.view">
        <field name="name">view.dtdream.hr.resume.tree</field>
        <field name="model">dtdream.hr.resume</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="workid"/>
                <field name="department"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

      <record model="ir.actions.server" id="act_dtdream_hr_resume">
        <field name="name">员工履历</field>
        <field name="model_id" ref="model_dtdream_hr_resume"/>
        <field name="code">
            action = {
            'name':'员工履历',
            'type': 'ir.actions.act_window',
            'view_type': 'form',
            'view_mode': 'form',
            'res_model': 'dtdream.hr.resume',
            'res_id': self.search(cr,uid,[('name.id','=', context.get("active_id"))],context=None)[0] if self.search(cr,uid,[('name.id','=', context.get("active_id"))],context=None) else "",
            'context':context,
            }
        </field>
    </record>

    <record id="view_employee_form_resume_inherit" model="ir.ui.view">
        <field name="name">hr.employee.resume.form.inherit</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="dtdream_hr.dtdream_view_employee_form"/>
        <field name="arch" type="xml">
            <button name="toggle_active" position="before">
               <field name="resume_view" invisible="True"/>
               <button class="oe_stat_button" type="action" name="%(act_dtdream_hr_resume)d"
                icon="fa-info" string="员工履历" attrs="{'invisible':[('resume_view','=',False)]}">
               </button>
            </button>
        </field>
    </record>

    <record id="view_dtdream_hr_contract_tree" model="ir.ui.view">
        <field name="name">view.dtdream.hr.contract.tree</field>
        <field name="model">dtdream.hr.contract</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="num"/>
                <field name="department"/>
                <field name="date_start"/>
                <field name="date_stop"/>
            </tree>
        </field>
    </record>

    <record id="view_dtdream_hr_contract_form" model="ir.ui.view">
        <field name="name">view.dtdream.hr.contract.form</field>
        <field name="model">dtdream.hr.contract</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="num"/>
                            <field name="date_stop"/>
                        </group>
                        <group>
                            <field name="department"/>
                            <field name="date_start"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record model="ir.actions.server" id="act_dtdream_hr_contract">
        <field name="name">合同</field>
        <field name="model_id" ref="model_dtdream_hr_contract"/>
        <field name="code">
            action = {
            'name':'合同',
            'type': 'ir.actions.act_window',
            'view_type': 'form',
            'view_mode': 'form',
            'res_model': 'dtdream.hr.contract',
            'res_id': self.search(cr,uid,[('name.id','=', context.get("active_id"))],context=None)[0] if self.search(cr,uid,[('name.id','=', context.get("active_id"))],context=None) else "",
            'context':context,
            }
        </field>
    </record>

    <record id="view_employee_form_contract_inherit" model="ir.ui.view">
        <field name="name">hr.employee.contract.form.inherit</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="dtdream_hr.dtdream_view_employee_form"/>
        <field name="arch" type="xml">
            <button name="toggle_active" position="before">
               <field name="contract_view" invisible="True"/>
               <button class="oe_stat_button" type="action" name="%(act_dtdream_hr_contract)d"
                icon="fa-edit" string="合同" attrs="{'invisible':[('resume_view','=',False)]}">
               </button>
            </button>
        </field>
    </record>

  </data>
</openerp>