<?xml version='1.0' ?>

<openerp>
    <data noupdate='0'>

        <!-- 工作流 -->
        <record id='wkf_ad' model='workflow' >
            <field name='name'>wkf.ad</field>
            <field name='osv'>dtdream.group.apply</field>
            <field name='on_create'>True</field>
        </record>

        <!-- 工作流draft节点 -->
        <record id='act_draft' model='workflow.activity' >
            <field name='wkf_id' ref='wkf_ad' />
            <field name='name'>draft</field>
            <field name='flow_start' eval='True'/>
            <field name='kind'>function</field>
            <field name='action'>wkf_draft()</field>
        </record>

        <!-- 工作流confirm节点 -->
        <record id='act_confirm' model='workflow.activity' >
            <field name='wkf_id' ref='wkf_ad' />
            <field name='name'>confirm</field>
           <!-- <field name='action_id' ref='act_send_email' /> -->
            <field name='kind'>function</field>
            <field name='action'>wkf_confirm()</field>
        </record>

        <!-- 工作流accept节点 -->
        <record id='act_accept' model='workflow.activity' >
            <field name='wkf_id' ref='wkf_ad' />
            <field name='name'>accept</field>
            <field name='kind'>function</field>
            <field name='action'>wkf_accept()</field>
        </record>

         <!-- 工作implement节点 -->
        <record id='act_implement' model='workflow.activity' >
            <field name='wkf_id' ref='wkf_ad' />
            <field name='name'>implement</field>
            <field name='flow_stop' eval='True' />
            <field name='kind'>function</field>
            <field name='action'>wkf_implement()</field>
        </record>

        <!-- 工作流draft->confirm节点转换 -->
        <record model='workflow.transition' id='ad_draft2confirm'>
            <field name='act_from' ref='act_draft' />
            <field name='act_to' ref='act_confirm' />
            <field name='signal'>btn_confirm</field>
        </record>


        <!-- 工作流confirm->accept节点转换 -->
        <record model='workflow.transition' id='ad_confirm2accept'>
            <field name='act_from' ref='act_confirm' />
            <field name='act_to' ref='act_accept' />
            <field name='signal'>btn_accept</field>
        </record>

        <!-- 工作流accept->implement节点转换 -->
        <record model='workflow.transition' id='ad_accept2implement'>
            <field name='act_from' ref='act_accept' />
            <field name='act_to' ref='act_implement' />
            <field name='signal'>btn_implement</field>
        </record>

        <!-- 工作流confirm->draft节点转换 -->
        <record model='workflow.transition' id='ad_confirm2refuse'>
            <field name='act_from' ref='act_confirm' />
            <field name='act_to' ref='act_draft' />
            <field name='signal'>btn_refuse</field>
        </record>

        <!-- 工作流 -->
        <record id='wkf_change' model='workflow' >
            <field name='name'>wkf.change</field>
            <field name='osv'>dtdream.change.apply</field>
            <field name='on_create'>True</field>
        </record>

        <!-- 工作流draft节点 -->
        <record id='act_draft01' model='workflow.activity' >
            <field name='wkf_id' ref='wkf_change' />
            <field name='name'>draft</field>
            <field name='flow_start' eval='True'/>
            <field name='kind'>function</field>
            <field name='action'>wkf_draft01()</field>
        </record>

        <!-- 工作流confirm节点 -->
        <record id='act_confirm01' model='workflow.activity' >
            <field name='wkf_id' ref='wkf_change' />
            <field name='name'>confirm</field>
           <!-- <field name='action_id' ref='act_send_email' /> -->
            <field name='kind'>function</field>
            <field name='action'>wkf_confirm01()</field>
        </record>

         <!-- 工作implement节点 -->
        <record id='act_implement01' model='workflow.activity' >
            <field name='wkf_id' ref='wkf_change' />
            <field name='name'>implement</field>
            <field name='flow_stop' eval='True' />
            <field name='kind'>function</field>
            <field name='action'>wkf_implement01()</field>
        </record>

        <!-- 工作流draft->confirm节点转换 -->
        <record model='workflow.transition' id='change_draft2confirm'>
            <field name='act_from' ref='act_draft01' />
            <field name='act_to' ref='act_confirm01' />
            <field name='signal'>btn_confirm01</field>
        </record>

        <!-- 工作流confirm->implement节点转换 -->
        <record model='workflow.transition' id='change_confirm2accept'>
            <field name='act_from' ref='act_confirm01' />
            <field name='act_to' ref='act_implement01' />
            <field name='signal'>btn_implement01</field>
        </record>

        <!-- 工作流confirm->draft节点转换 -->
        <record model='workflow.transition' id='change_refuse2confirm'>
            <field name='act_from' ref='act_confirm01' />
            <field name='act_to' ref='act_draft01' />
            <field name='signal'>btn_refuse01</field>
        </record>
    </data>
</openerp>